const e={equals:(e,t)=>e===t};let t=k;const n=1,s=2,o={owned:null,cleanups:null,context:null,owner:null};var r=null;let u=null,l=null,c=null,a=null,i=0;function f(e,t){const n=l,s=r,u=0===e.length,c=void 0===t?s:t,a=u?o:{owned:null,cleanups:null,context:c?c.context:null,owner:c},i=u?e:()=>e((()=>b((()=>F(a)))));r=a,l=null;try{return m(i,!0)}finally{l=n,r=s}}function h(t,n){const s={value:t,observers:null,observerSlots:null,comparator:(n=n?Object.assign({},e,n):e).equals||void 0};return[S.bind(s),e=>("function"==typeof e&&(e=e(s.value)),y(s,e))]}function p(e,t,s){A(x(e,t,!1,n))}function d(e,s,o){t=q;const r=x(e,s,!1,n);r.user=!0,a?a.push(r):A(r)}function v(t,n,s){s=s?Object.assign({},e,s):e;const o=x(t,n,!0,0);return o.observers=null,o.observerSlots=null,o.comparator=s.equals||void 0,A(o),S.bind(o)}function b(e){if(null===l)return e();const t=l;l=null;try{return e()}finally{l=t}}function w(e){d((()=>b(e)))}function g(e){return null===r||(null===r.cleanups?r.cleanups=[e]:r.cleanups.push(e)),e}function S(){if(this.sources&&this.state)if(this.state===n)A(this);else{const e=c;c=null,m((()=>E(this)),!1),c=e}if(l){const e=this.observers?this.observers.length:0;l.sources?(l.sources.push(this),l.sourceSlots.push(e)):(l.sources=[this],l.sourceSlots=[e]),this.observers?(this.observers.push(l),this.observerSlots.push(l.sources.length-1)):(this.observers=[l],this.observerSlots=[l.sources.length-1])}return this.value}function y(e,t,s){let o=e.value;return e.comparator&&e.comparator(o,t)||(e.value=t,e.observers&&e.observers.length&&m((()=>{for(let t=0;t<e.observers.length;t+=1){const s=e.observers[t],o=u&&u.running;o&&u.disposed.has(s),(o?s.tState:s.state)||(s.pure?c.push(s):a.push(s),s.observers&&j(s)),o||(s.state=n)}if(c.length>1e6)throw c=[],new Error}),!1)),t}function A(e){if(!e.fn)return;F(e);const t=i;!function(e,t,s){let o;const u=r,c=l;l=r=e;try{o=e.fn(t)}catch(a){return e.pure&&(e.state=n,e.owned&&e.owned.forEach(F),e.owned=null),e.updatedAt=s+1,U(a)}finally{l=c,r=u}(!e.updatedAt||e.updatedAt<=s)&&(null!=e.updatedAt&&"observers"in e?y(e,o):e.value=o,e.updatedAt=s)}(e,e.value,t)}function x(e,t,s,u=n,l){const c={fn:e,state:u,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:r,context:r?r.context:null,pure:s};return null===r||r!==o&&(r.owned?r.owned.push(c):r.owned=[c]),c}function O(e){if(0===e.state)return;if(e.state===s)return E(e);if(e.suspense&&b(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<i);)e.state&&t.push(e);for(let o=t.length-1;o>=0;o--)if((e=t[o]).state===n)A(e);else if(e.state===s){const n=c;c=null,m((()=>E(e,t[0])),!1),c=n}}function m(e,n){if(c)return e();let s=!1;n||(c=[]),a?s=!0:a=[],i++;try{const n=e();return function(e){c&&(k(c),c=null);if(e)return;const n=a;a=null,n.length&&m((()=>t(n)),!1)}(s),n}catch(o){s||(a=null),c=null,U(o)}}function k(e){for(let t=0;t<e.length;t++)O(e[t])}function q(e){let t,n=0;for(t=0;t<e.length;t++){const s=e[t];s.user?e[n++]=s:O(s)}for(t=0;t<n;t++)O(e[t])}function E(e,t){e.state=0;for(let o=0;o<e.sources.length;o+=1){const r=e.sources[o];if(r.sources){const e=r.state;e===n?r!==t&&(!r.updatedAt||r.updatedAt<i)&&O(r):e===s&&E(r,t)}}}function j(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=s,n.pure?c.push(n):a.push(n),n.observers&&j(n))}}function F(e){let t;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),n=e.sourceSlots.pop(),s=t.observers;if(s&&s.length){const e=s.pop(),o=t.observerSlots.pop();n<s.length&&(e.sourceSlots[o]=n,s[n]=e,t.observerSlots[n]=o)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)F(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)F(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function U(e,t=r){const n=function(e){return e instanceof Error?e:new Error("string"==typeof e?e:"Unknown error",{cause:e})}(e);throw n}function $(e,t){return b((()=>e(t||{})))}function z(e){const t=e.keyed,n=v((()=>e.when),void 0,void 0),s=t?n:v(n,void 0,{equals:(e,t)=>!e==!t});return v((()=>{const o=s();if(o){const r=e.children;return"function"==typeof r&&r.length>0?b((()=>r(t?o:()=>{if(!b(s))throw`Stale read from <${"Show"}>.`;return n()}))):r}return e.fallback}),void 0,void 0)}export{z as S,p as a,v as b,f as c,h as d,g as e,$ as f,d as g,w as o,b as u};
//# sourceMappingURL=vendor-BB8JdVqS.js.map
